{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/assessment/assessment-pt-imp/nextjs/src/app/api/proxy/%5B...path%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\n\r\nasync function proxyRequest(\r\n  req: NextRequest,\r\n  params: { path: string[] },\r\n  method: string\r\n) {\r\n  try {\r\n    const token = req.headers.get(\"authorization\") || \"\";\r\n    const apiPath = params.path.join(\"/\");\r\n    const queryString = req.nextUrl.searchParams.toString();\r\n    const apiUrl = `http://localhost:8000/api/${apiPath}${ queryString ? `?${queryString}` : \"\" }`;\r\n\r\n\r\n    let body: string | FormData | undefined;\r\n    const headers: Record<string, string> = { Authorization: token };\r\n\r\n    if (method !== \"GET\") {\r\n      const contentType = req.headers.get(\"content-type\") || \"\";\r\n      if (contentType.includes(\"multipart/form-data\")) {\r\n        body = await req.formData();\r\n      } else {\r\n        try {\r\n          const json = await req.json();\r\n          body = JSON.stringify(json);\r\n          headers[\"Content-Type\"] = \"application/json\";\r\n        } catch {\r\n          body = undefined;\r\n        }\r\n      }\r\n    }\r\n\r\n    const response = await fetch(apiUrl, { method, headers, body });\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      let errorData;\r\n      try {\r\n        errorData = errorText ? JSON.parse(errorText) : {};\r\n      } catch {\r\n        errorData = {};\r\n      }\r\n      return NextResponse.json(\r\n        { error: `API error: ${response.status}`, details: errorData },\r\n        { status: response.status }\r\n      );\r\n    }\r\n\r\n    const text = await response.text();\r\n    let data;\r\n    try {\r\n      data = text ? JSON.parse(text) : {};\r\n    } catch {\r\n      data = {};\r\n    }\r\n\r\n    return NextResponse.json(data);\r\n  } catch (err: any) {\r\n    return NextResponse.json({ error: err.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function GET(req: NextRequest, context: { params: Promise<{ path: string[] }> }) {\r\n  const params = await context.params;\r\n  return proxyRequest(req, params, \"GET\");\r\n}\r\n\r\nexport async function POST(req: NextRequest, context: { params: Promise<{ path: string[] }> }) {\r\n  const params = await context.params;\r\n  return proxyRequest(req, params, \"POST\");\r\n}\r\n\r\nexport async function PUT(req: NextRequest, context: { params: Promise<{ path: string[] }> }) {\r\n  const params = await context.params;\r\n  return proxyRequest(req, params, \"PUT\");\r\n}\r\n\r\nexport async function DELETE(req: NextRequest, context: { params: Promise<{ path: string[] }> }) {\r\n  const params = await context.params;\r\n  return proxyRequest(req, params, \"DELETE\");\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,eAAe,aACb,GAAgB,EAChB,MAA0B,EAC1B,MAAc;IAEd,IAAI;QACF,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;QAClD,MAAM,UAAU,OAAO,IAAI,CAAC,IAAI,CAAC;QACjC,MAAM,cAAc,IAAI,OAAO,CAAC,YAAY,CAAC,QAAQ;QACrD,MAAM,SAAS,CAAC,0BAA0B,EAAE,UAAW,cAAc,CAAC,CAAC,EAAE,aAAa,GAAG,IAAK;QAG9F,IAAI;QACJ,MAAM,UAAkC;YAAE,eAAe;QAAM;QAE/D,IAAI,WAAW,OAAO;YACpB,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC,mBAAmB;YACvD,IAAI,YAAY,QAAQ,CAAC,wBAAwB;gBAC/C,OAAO,MAAM,IAAI,QAAQ;YAC3B,OAAO;gBACL,IAAI;oBACF,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,OAAO,KAAK,SAAS,CAAC;oBACtB,OAAO,CAAC,eAAe,GAAG;gBAC5B,EAAE,OAAM;oBACN,OAAO;gBACT;YACF;QACF;QAEA,MAAM,WAAW,MAAM,MAAM,QAAQ;YAAE;YAAQ;YAAS;QAAK;QAE7D,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,IAAI;YACJ,IAAI;gBACF,YAAY,YAAY,KAAK,KAAK,CAAC,aAAa,CAAC;YACnD,EAAE,OAAM;gBACN,YAAY,CAAC;YACf;YACA,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,CAAC,WAAW,EAAE,SAAS,MAAM,EAAE;gBAAE,SAAS;YAAU,GAC7D;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,IAAI;QACJ,IAAI;YACF,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,CAAC;QACpC,EAAE,OAAM;YACN,OAAO,CAAC;QACV;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAU;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACjE;AACF;AAEO,eAAe,IAAI,GAAgB,EAAE,OAAgD;IAC1F,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,OAAO,aAAa,KAAK,QAAQ;AACnC;AAEO,eAAe,KAAK,GAAgB,EAAE,OAAgD;IAC3F,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,OAAO,aAAa,KAAK,QAAQ;AACnC;AAEO,eAAe,IAAI,GAAgB,EAAE,OAAgD;IAC1F,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,OAAO,aAAa,KAAK,QAAQ;AACnC;AAEO,eAAe,OAAO,GAAgB,EAAE,OAAgD;IAC7F,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,OAAO,aAAa,KAAK,QAAQ;AACnC","debugId":null}}]
}