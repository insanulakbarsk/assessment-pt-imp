{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/laragon/www/assessment/nextjs/src/app/posts/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { motion } from \"framer-motion\";\r\nimport toast from \"react-hot-toast\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function PostsPage() {\r\n  const [posts, setPosts] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const router = useRouter();\r\n\r\n  const fetchPosts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const storedToken = localStorage.getItem(\"token\");\r\n      setToken(storedToken);\r\n      const res = await fetch(\"/api/proxy/posts\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          Authorization: `Bearer ${storedToken}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Gagal memuat postingan\");\r\n\r\n      const data = await res.json();\r\n      setPosts(Array.isArray(data.data) ? data.data : []);\r\n    } catch (err: any) {\r\n      toast.error(err.message);\r\n      setPosts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm(\"Yakin ingin menghapus postingan ini?\")) return;\r\n\r\n    try {\r\n      const res = await fetch(`/api/proxy/posts/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Gagal menghapus post\");\r\n\r\n      toast.success(\"Post berhasil dihapus!\");\r\n      setPosts(posts.filter((post) => post.id !== id));\r\n    } catch (err: any) {\r\n      toast.error(\"Terjadi kesalahan saat menghapus post\");\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    if (confirm(\"Yakin ingin logout?\")) {\r\n      localStorage.removeItem(\"token\");\r\n      toast.success(\"Berhasil logout ðŸ‘‹\");\r\n      router.push(\"/\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-screen\">\r\n        <span className=\"loading loading-spinner text-primary w-10 h-10\"></span>\r\n        <p className=\"mt-4 text-gray-500\">Memuat data...</p>\r\n      </div>\r\n    );\r\n\r\n  if (posts.length === 0)\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-950 dark:to-black transition-all\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 15 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"text-center bg-white/60 dark:bg-gray-900/60 backdrop-blur-md border border-white/20 shadow-xl rounded-3xl p-10\"\r\n        >\r\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3\">\r\n            ðŸ“„ Belum Ada Postingan\r\n          </h1>\r\n          <p className=\"text-gray-500 dark:text-gray-400\">\r\n            Mulailah membuat postingan pertama Anda.\r\n          </p>\r\n          <Link href=\"/posts/create\" className=\"btn btn-primary mt-5 px-8\">\r\n            + Buat Postingan\r\n          </Link>\r\n        </motion.div>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-950 dark:to-black transition-all p-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-center mb-8 space-y-3 sm:space-y-0\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <h1 className=\"text-3xl font-bold text-gray-800 dark:text-white\">\r\n                âœ¨ Daftar Postingan\r\n              </h1>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <Link href=\"/posts/create\" className=\"btn btn-primary\">\r\n                + Buat Baru\r\n              </Link>\r\n\r\n              {token && (\r\n                <button\r\n                  onClick={handleLogout}\r\n                  className=\"btn btn-outline btn-error\"\r\n                >\r\n                  Logout\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n\r\n        {/* Grid of cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {posts.map((post, i) => (\r\n            <motion.div\r\n              key={post.id}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: i * 0.05 }}\r\n              className=\"card bg-white/80 dark:bg-gray-900/60 backdrop-blur-sm border border-white/20 shadow-lg hover:shadow-2xl transition-all duration-300\"\r\n            >\r\n              <div className=\"card-body p-5\">\r\n                <h2 className=\"card-title text-lg text-gray-800 dark:text-gray-100\">\r\n                  {post.title}\r\n                </h2>\r\n                <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n                  {post.body?.length > 100\r\n                    ? post.body.slice(0, 100) + \"...\"\r\n                    : post.body}\r\n                </p>\r\n                <div className=\"card-actions justify-end mt-4\">\r\n                  <Link\r\n                    href={`/posts/${post.id}`}\r\n                    className=\"btn btn-sm btn-outline\"\r\n                  >\r\n                    View\r\n                  </Link>\r\n                  <Link\r\n                    href={`/posts/${post.id}/edit`}\r\n                    className=\"px-2 btn btn-sm btn-secondary\"\r\n                  >\r\n                    Edit\r\n                  </Link>\r\n                  {token && (\r\n                    <button\r\n                      onClick={() => handleDelete(post.id)}\r\n                      className=\"px-2 btn btn-sm btn-error\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","Link","motion","toast","useRouter","PostsPage","posts","setPosts","loading","setLoading","token","setToken","router","fetchPosts","storedToken","localStorage","getItem","res","fetch","method","headers","Authorization","ok","Error","data","json","Array","isArray","err","error","message","handleDelete","id","confirm","success","filter","post","handleLogout","removeItem","push","length","opacity","y","map","i","delay","title","body","slice"],"mappings":";;;;;AAEA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,IAAI,MAAM,WAAW;AAC5B,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAASC,SAAS,QAAQ,iBAAiB;;;AAN3C,YAAY;;;;;;AAQG;;IACb,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,OAAGP,yKAAQ,CAAC,CAAO,EAAJ,AAAM,CAAC,CAAL,CAAC;IACzC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,OAAGT,yKAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,OAAGX,yKAAQ,CAAC,CAAe,IAAI,CAAb,AAAc,GAAX,IAAI,CAAC;IACjD,MAAMY,MAAM;IAEZ,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;QAC7BJ,UAAU,CAAC,IAAI,CAAC;QAChB,IAAI;YACF,MAAMK,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;YACjDL,QAAQ,CAACG,WAAW,CAAC;YACrB,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,kBAAkB,EAAE;gBAC1CC,MAAM,EAAE,KAAK;gBACbC,OAAO,EAAE;oBACPC,aAAa,EAAE,CAAA,OAAA,EAAUP,WAAW,EAAA;gBACtC;YACF,CAAC,CAAC;YAEF,IAAI,CAACG,GAAG,CAACK,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;YAEtD,MAAMC,IAAI,GAAG,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC;YAC7BlB,QAAQ,CAACmB,KAAK,CAACC,OAAO,CAACH,IAAI,CAACA,IAAI,CAAC,GAAGA,IAAI,CAACA,IAAI,GAAG,EAAE,CAAC;QACrD,CAAC,CAAC,OAAOI,GAAG,EAAE,AAAK,GAAF;YACfzB,qKAAK,CAAC0B,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC;YACxBvB,QAAQ,CAAC,EAAE,CAAC;QACd,CAAC,QAAS;YACRE,UAAU,CAAC,KAAK,CAAC;QACnB;IACF,CAAC;IAED,MAAMsB,YAAY,GAAG,MAAAA,CAAOC,EAAE,EAAE,MAAM,KAAK;QACzC,IAAI,CAACC,OAAO,CAAC,sCAAsC,CAAC,EAAE;QAEtD,IAAI;YACF,MAAMhB,KAAG,GAAG,MAAMC,KAAK,CAAC,CAAA,iBAAA,EAAoBc,EAAE,EAAE,EAAE;gBAChDb,MAAM,EAAE,QAAQ;gBAChBC,OAAO,EAAE;oBACPC,aAAa,EAAE,CAAA,OAAA,EAAUX,KAAK,EAAA;gBAChC;YACF,CAAC,CAAC;YAEF,IAAI,CAACO,KAAG,CAACK,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;YAEpDpB,qKAAK,CAAC+B,OAAO,CAAC,wBAAwB,CAAC;YACvC3B,QAAQ,CAACD,KAAK,CAAC6B,MAAM,EAAEC,IAAI,GAAKA,IAAI,CAACJ,EAAE,KAAKA,EAAE,CAAC,CAAC;QAClD,CAAC,CAAC,OAAOJ,KAAG,EAAE,AAAK,GAAF;YACfzB,qKAAK,CAAC0B,KAAK,CAAC,uCAAuC,CAAC;QACtD;IACF,CAAC;IAED,MAAMQ,YAAY,GAAGA,CAAA,KAAM;QACzB,IAAIJ,OAAO,CAAC,qBAAqB,CAAC,EAAE;YAClClB,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC;YAChCnC,qKAAK,CAAC+B,OAAO,CAAC,oBAAoB,CAAC;YACnCtB,MAAM,CAAC2B,IAAI,CAAC,GAAG,CAAC;QAClB;IACF,CAAC;QAEDxC,0KAAS;+BAAC,MAAM;YACdc,UAAU,CAAC,CAAC;QACd,CAAC;8BAAE,EAAE,CAAC;IAEN,IAAIL,OAAO,EACT,qBACE,6LAAC,GAAG;QAAC,SAAS,EAAC,oDAAoD,CAAC;;0BAClE,6LAAC,IAAI;gBAAC,SAAS,EAAC,gDAAgD,CAAC,EAAE,IAAI,CAAC;;;;;;0BACxE,6LAAC,CAAC;gBAAC,SAAS,EAAC,oBAAoB;0BAAC,cAAc,EAAE,CAAC,CAAC;;;;;;;;;;;;IAI1D,IAAIF,KAAK,CAACkC,MAAM,KAAK,CAAC,EACpB,qBACE,6LAAC,GAAG;QAAC,SAAS,EAAC,iLAAiL,CAAC;gCAC/L,6LAAC,uMAAM,CAAC,GAAG;YACT,OAAO,CAAC,CAAC;gBAAEC,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE;YAAG,CAAC,CAAC;YAC/B,OAAO,CAAC,CAAC;gBAAED,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE;YAAE,CAAC,CAAC;YAC9B,SAAS,EAAC,gHAAgH,CAC3H;;8BACC,6LAAC,EAAE;oBAAC,SAAS,EAAC,uDAAuD;8BAAC;;;;;;8BAGtE,6LAAC,CAAC;oBAAC,SAAS,EAAC,kCAAkC;8BAAC;;;;;;8BAGhD,6LAAC,0KAAI;oBAAC,IAAI,EAAC,eAAe;oBAAC,SAAS,EAAC,2BAA2B;8BAAC;;;;;;;;;;;;;;;;;IAOzE,qBACE,6LAAC,GAAG;QAAC,SAAS,EAAC,2IAA2I,CAAC;gCACzJ,6LAAC,GAAG;YAAC,SAAS,EAAC,mBAAmB,CAAC;;8BAEjC,6LAAC,GAAG;oBAAC,SAAS,EAAC,oFAAoF,CAAC;;sCAChG,6LAAC,GAAG;4BAAC,SAAS,EAAC,yBAAyB,CAAC;oDACvC,6LAAC,EAAE;gCAAC,SAAS,EAAC,kDAAkD;0CAAC;;;;;;;;;;;sCAKnE,6LAAC,GAAG;4BAAC,SAAS,EAAC,yBAAyB,CAAC;;8CACvC,6LAAC,0KAAI;oCAAC,IAAI,EAAC,eAAe;oCAAC,SAAS,EAAC,iBAAiB;8CAAC;;;;;;gCAItDhC,KAAK,kBACJ,6LAAC,MAAM;oCACL,OAAO,CAAC,CAAC2B,YAAY,CAAC;oCACtB,SAAS,EAAC,2BAA2B;8CACtC;;;;;;;;;;;;;;;;;;8BAST,6LAAC,GAAG;oBAAC,SAAS,EAAC,sDAAsD,CAAC;8BACnE/B,KAAK,CAACqC,GAAG,CAAC,CAACP,MAAI,EAAEQ,CAAC,iBACjB,6LAAC,uMAAM,CAAC,GAAG,CACT,GAAG,CAAC;4BACJ,OAAO,CAAC,CAAC;gCAAEH,OAAO,EAAE,CAAC;gCAAEC,CAAC,EAAE;4BAAG,CAAC,CAAC;4BAC/B,OAAO,CAAC,CAAC;gCAAED,OAAO,EAAE,CAAC;gCAAEC,CAAC,EAAE;4BAAE,CAAC,CAAC;4BAC9B,UAAU,CAAC,CAAC;gCAAEG,KAAK,EAAED,CAAC,GAAG;4BAAK,CAAC,CAAC;4BAChC,SAAS,EAAC,qIAAqI,CAChJ;oDACC,6LAAC,GAAG;gCAAC,SAAS,EAAC,eAAe,CAAC;;kDAC7B,6LAAC,EAAE;wCAAC,SAAS,EAAC,qDAAqD,CAAC;kDACjER,MAAI,CAACU,KAAK,CAAC;;;;;;kDAEd,6LAAC,CAAC;wCAAC,SAAS,EAAC,uCAAuC,CAAC;kDAClDV,MAAI,CAACW,IAAI,EAAEP,MAAM,GAAG,GAAG,GACpBJ,MAAI,CAACW,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK,GAC/BZ,MAAI,CAACW,IAAI,CAAC;;;;;;kDAEhB,6LAAC,GAAG;wCAAC,SAAS,EAAC,+BAA+B,CAAC;;0DAC7C,6LAAC,0KAAI;gDACH,IAAI,CAAC,CAAC,CAAA,OAAA,EAAUX,MAAI,CAACJ,EAAE,EAAE,CAAC;gDAC1B,SAAS,EAAC,wBAAwB;0DACnC;;;;;;0DAGD,6LAAC,0KAAI;gDACH,IAAI,CAAC,CAAC,CAAA,OAAA,EAAUI,MAAI,CAACJ,EAAE,CAAA,KAAA,CAAO,CAAC;gDAC/B,SAAS,EAAC,+BAA+B;0DAC1C;;;;;;4CAGAtB,KAAK,kBACJ,6LAAC,MAAM;gDACL,OAAO,CAAC,CAAC,IAAMqB,YAAY,CAACK,MAAI,CAACJ,EAAE,CAAC,CAAC;gDACrC,SAAS,EAAC,2BAA2B;0DACtC;;;;;;;;;;;;;;;;;;2BAhCFI,MAAI,CAACJ,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;AA4C3B;;;QAnKiB5B,kJAAS,CAAC,CAAC;;;KAJJC,SAASA,CAAA,EAAG","ignoreList":[],"debugId":null}}]
}